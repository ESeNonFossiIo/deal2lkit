CMAKE_MINIMUM_REQUIRED(VERSION 2.8.8)
SET_PROPERTY(GLOBAL PROPERTY TARGET_SUPPORTS_SHARED_LIBS TRUE)

FIND_PACKAGE(deal.II 8.0 REQUIRED HINTS $ENV{DEAL_II_DIR})
FIND_PACKAGE(dealii-sak 1.0 REQUIRED HINTS $ENV{SAK_DIR})

SET(TARGET "exe")
set(CMAKE_BUILD_TYPE "Debug")

file(GLOB TARGET_SRC source/*cc)
include_directories(
	include 
	${DEAL_II_INCLUDE_DIRS}
	${SAK_INCLUDE_DIRS}
)

DEAL_II_INITIALIZE_CACHED_VARIABLES()
PROJECT(${TARGET})
DEAL_II_INVOKE_AUTOPILOT()

SET(_install $ENV{WAVEBEM_DIR})
SET(CMAKE_INSTALL_PREFIX ${_install})

STRING(TOLOWER ${CMAKE_BUILD_TYPE} _build)
MESSAGE(dealii-sak.${_build})
FIND_LIBRARY(dealii-sak dealii-sak.${_build}
	     HINTS $ENV{SAK_DIR}/lib)
MESSAGE('dealii-sak.${_build}')
MESSAGE(${sak})
target_link_libraries(
	${TARGET} 
	${sak}
)

install(DIRECTORY utilities DESTINATION utilities
	PATTERN ".svn" ".git" EXCLUDE)
install(PROGRAMS ${CMAKE_CURRENT_BINARY_DIR}/exe DESTINATION .)
install(FILES parameters.prm DESTINATION .)

